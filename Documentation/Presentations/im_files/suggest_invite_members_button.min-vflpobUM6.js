define(["require","exports","tslib","react","spectrum/button","modules/clean/viewer","modules/clean/analytics","modules/core/i18n","modules/clean/api_v2/default_user_client"],(function(e,t,a,i,s,n,l,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=a.__importDefault(i);var d,u=n.Viewer.get_viewer();(function(e){e[e.Suggest=0]="Suggest",e[e.Invite=1]="Invite"})(d||(d={}));var m=function(e){var t="clicked_suggest_members_cta";(void 0===e?{is_invite:!1}:e).is_invite&&(t="clicked_invite_members_cta"),l.TeamsWebActionsLogger.log(t,{source:"sidebar"},null,null,!1,l.TeamsWebActionsLogger.LOG_CATEGORY.TEAM_INFO)};function c(e){var t,a;return e.showCta&&e.modal&&(e.suggestInvitesModal||e.limitedTeamInviteModal)?(t={is_invite:!!e.limitedTeamInviteModal},a="suggest_members_cta_seen",(void 0===t?{is_invite:!1}:t).is_invite&&(a="invite_members_cta_seen"),l.TeamsWebActionsLogger.log(a,{source:"sidebar"},null,null,!1,l.TeamsWebActionsLogger.LOG_CATEGORY.TEAM_INFO),i.default.createElement(s.Button,{"data-testid":"suggest_members_button",onClick:function(){var t,a;e.modal&&(e.messageType===d.Suggest&&e.suggestInvitesModal?(t=e.modal,a=e.suggestInvitesModal,m(),t.showInstance(i.default.createElement(a,{teamId:u.team_id,teamType:u.team_type,source:"sidebar",membersSendInviteExperimentEnabled:!0}))):e.messageType===d.Invite&&e.limitedTeamInviteModal&&(function(e,t,a,s){m({is_invite:!0}),e.showInstance(i.default.createElement(t,{includeCustomMessage:!1,isMemberInviteExperiment:!0,numAvailableLicenses:s,source:"sidebar",onInvited:function(e){a&&a(e.emails.length)}}))})(e.modal,e.limitedTeamInviteModal,e.onInvite,e.availableLicenses))},variant:"secondary",style:{margin:"5px 25px 10px -15px"}},i.default.createElement("svg",{width:"18",height:"15",viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 3H0V5H3V8H5V5H8V3H5V0H3V3Z",fill:"#99C6F3"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.29988 15H5.39988C4.89988 15 4.69988 14.7 4.89988 14.2L5.39988 12.8C5.79988 11.7 6.99988 10.9 8.19988 10.9H10.3999C11.4999 10.9 12.7999 11.8 13.1999 12.8L13.6999 14.2C13.8999 14.6 13.5999 15 13.1999 15H9.29988ZM9.29988 10C8.76945 10 8.26074 9.78929 7.88567 9.41421C7.5106 9.03914 7.29988 8.53043 7.29988 8C7.29988 7.46957 7.5106 6.96086 7.88567 6.58579C8.26074 6.21071 8.76945 6 9.29988 6C9.83032 6 10.339 6.21071 10.7141 6.58579C11.0892 6.96086 11.2999 7.46957 11.2999 8C11.2999 8.53043 11.0892 9.03914 10.7141 9.41421C10.339 9.78929 9.83032 10 9.29988 10ZM14.1999 10.9C13.2999 10.9 12.5999 10.2 12.5999 9.3C12.5999 8.4 13.2999 7.7 14.1999 7.7C15.0999 7.7 15.7999 8.4 15.7999 9.3C15.7999 10.2 15.0999 10.9 14.1999 10.9ZM13.4999 12.1C13.3999 11.9 13.5999 11.7 13.7999 11.7H14.9999C15.8999 11.7 16.8999 12.4 17.1999 13.2L17.4999 14.2C17.5999 14.6 17.3999 15 16.8999 15H14.9999C14.7999 15 14.4999 14.8 14.4999 14.6L13.4999 12.1Z",fill:"#0070E0"})),"  ",e.translatedMessage)):null}t.SuggestMembersButton=c,t.SuggestMembersButtonWithData=function(t){void 0===t&&(t={isHaShownOrLoading:!1});var s=i.default.useState({}),l=s[0],u=l.modal,m=l.limitedTeamInviteModal,g=l.suggestInvitesModal,v=s[1],_=i.default.useState(0),f=_[0],p=_[1],C=i.default.useState({showCta:!1,apiCalled:!1}),w=C[0],M=w.translatedMessage,b=w.messageType,I=w.showCta,h=w.apiCalled,T=C[1];return i.default.useEffect((function(){n.Viewer.get_viewer().work_user?new r.DefaultUserApiV2Client(n.Viewer.get_viewer().work_user).ns("team").rpc("get_send_team_invite_permission",void 0,{}).then((function(e){var t,a;e.show_sidebar_invite_suggest_cta&&e.permission&&"no_access"!==e.permission[".tag"]&&("can_invite"===e.permission[".tag"]||"can_suggest_members"===e.permission[".tag"])?(t=o.intl.formatMessage({id:"vebjQP",defaultMessage:"Invite people"}),a="can_suggest_members"===e.permission[".tag"]?d.Suggest:d.Invite,p(e.available_licenses),T({showCta:!0,apiCalled:!0,translatedMessage:t,messageType:a})):T({showCta:!1,apiCalled:!0})})):T({showCta:!1,apiCalled:!0})}),[T,p]),i.default.useEffect((function(){I&&(function(){a.__awaiter(this,void 0,void 0,(function(){var t,i,s,n,l;return a.__generator(this,(function(o){switch(o.label){case 0:return b!==d.Invite?[3,2]:[4,Promise.all([new Promise((function(t,a){e(["modules/clean/react/modal"],t,a)})).then(a.__importStar),new Promise((function(t,a){e(["modules/clean/teams/limited_team_invite_modal"],t,a)})).then(a.__importStar)])];case 1:return t=o.sent(),n=t[0].Modal,i=t[1].default,v({modal:n,limitedTeamInviteModal:i}),[3,4];case 2:return[4,Promise.all([new Promise((function(t,a){e(["modules/clean/react/modal"],t,a)})).then(a.__importStar),new Promise((function(t,a){e(["modules/clean/teams/suggest_invites_modal"],t,a)})).then(a.__importStar)])];case 3:s=o.sent(),n=s[0].Modal,l=s[1].SuggestInvitesModal,v({modal:n,suggestInvitesModal:l}),o.label=4;case 4:return[2]}}))}))})()}),[M,I]),h?!I||t.isHaShownOrLoading?i.default.createElement(c,{showCta:!1}):I&&u&&(g||m)?i.default.createElement(c,{translatedMessage:M,messageType:b,showCta:!0,modal:u,suggestInvitesModal:g,limitedTeamInviteModal:m,availableLicenses:f,onInvite:function(e){var t=f-e;p(t>0?t:0)}}):null:null}}));
//# sourceMappingURL=suggest_invite_members_button.min.js-vflG1I6gs.map