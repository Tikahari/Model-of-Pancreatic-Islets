define(["require","exports","tslib","react","dig-components/avatar","dig-components/typography","spectrum/typeahead","modules/clean/teams/admin/widgets/groups/util","modules/core/i18n","modules/clean/react/css"],(function(e,t,a,n,s,r,i,u,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importStar(n),t.TeamMembersTypeahead=l.requireCssWithComponent((function(e){var t=e.userId,s=e.memberList,r=e.selected,u=e.onChange,l=n.useState([]),m=l[0],c=l[1],f=s.reduce((function(e,n){return n.user_id===t?e:(e.push(a.__assign(a.__assign({},n),{email:n.email.toLowerCase(),display_name:n.display_name.toLowerCase()})),e)}),[]),p=function(e){c(f.reduce((function(t,a){if(r.find((function(e){return e.user_id===a.user_id})))return t;var n=e?e.trim().toLowerCase():e;return e&&n?a.email.indexOf(n)>-1?t.push(a):a.display_name.indexOf(n)>-1&&t.push(a):t.push(a),t}),[]))};n.useEffect(p,[r,s]);return n.default.createElement(i.Typeahead,{height:200,listItemHeight:48,className:"groups-typeahead members-typeahead",inputProps:{placeholder:r.length?void 0:o.intl.formatMessage({id:"jt3SDw",defaultMessage:"Name or email"})},onChange:p,onRemoveToken:function(e){return u(r.filter((function(t){return t.user_id!==e.user_id})))},onSelect:function(e,t,n){var i=s.find((function(t){return!!e&&e.user_id===t.user_id}));i&&u(a.__spreadArrays(r,[i]))},renderSuggestion:function(e){return n.default.createElement(d,{token:e})},renderTokenContent:function(e){return n.default.createElement(n.default.Fragment,null,e.display_name?e.display_name:e.email)},suggestions:m,tokens:r.map((function(e){return{key:e.user_id,variant:"default",content:e}}))})}),["/static/css/spectrum/index.web-vfl6Z83yw.css","/static/css/dig-components/index.web-vflSjAPFK.css","/static/css/teams/admin/widgets/groups/team_members_typeahead-vflsMRp-Z.css"]);var d=function(e){var t=e.token,a=t.display_name?t.display_name:t.email;return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"group-suggestion-icon"},n.default.createElement(s.Avatar,{size:"standard",hasNoOutline:!0,backgroundColor:s.avatarColorForUserIdentifier(u.getInitials(a))},u.getInitials(a))),n.default.createElement("div",{className:"group-suggestion-info"},n.default.createElement(r.Text,null,a),t.display_name&&n.default.createElement(r.Text,{size:"small",color:"faint"},t.email)))}}));
//# sourceMappingURL=team_members_typeahead.min.js-vflhhAms-.map